% Generated by roxygen2 (4.1.1): do not edit by hand
% Please edit documentation in R/ensemble_modelling.R
\name{ensemble_modelling}
\alias{ensemble_modelling}
\title{Build an SDM using multiple algorithms}
\usage{
ensemble_modelling(algorithms, Occurrences, Env, Xcol = "Longitude",
  Ycol = "Latitude", Pcol = NULL, rep = 1, name = NULL, save = F,
  directory = getwd(), PA = NULL, cv = "holdout", cv.param = c(0.7, 1),
  thresh = 1001, metric = "SES", axes.metric = "Pearson",
  uncertainty = T, tmp = F, ensemble.metric = c("AUC"),
  ensemble.thresh = c(0.75), weight = T, verbose = T, GUI = F, ...)
}
\arguments{
\item{algorithms}{character. Choice of the algorithm(s) (see details below).}

\item{Occurrences}{data frame. Occurrences table (can be treated first by
\code{\link{load_occ}}).}

\item{Env}{raster object. Raster object of environmental variable (can be
treated first by \code{\link{load_var}}).}

\item{Xcol}{character. Name of the column  in the occurences table  containing
Latitude or X coordinates.}

\item{Ycol}{character. Name of the column in the occurences table  containing
Longitude or Y coordinates.}

\item{Pcol}{character. Name of the column in the occurences table specifying
wether a line is a presence or an absence. If NULL presence-only data set is
assumed.}

\item{rep}{integer. Number of repetitions for each algorithm.}

\item{name}{character. Optional name given to the final Ensemble.SDM
producted.}

\item{save}{logical. If true the ensemble SDM is automatically saved.}

\item{directory}{character. If save is true, the name of the directory in
which the ensemble SDM will be saved.}

\item{PA}{list(nb, strat) defining the pseudo-absence selection strategy used
in case of presence-only data. If PA is NULL recommended PA is used
depending on the algorithms (see details below).}

\item{cv}{character. Method of cross-validation used to evaluate the ensemble
SDM (see details below).}

\item{cv.param}{numeric. Parameters associated to the method of
cross-validation used to evaluate the ensemble SDM (see details below).}

\item{thresh}{numeric. A single integer value representing the number of equal
interval threshold values between 0 & 1. The higher it is the more accurate
is the threshold but the longer is the modelling evaluation step (see
\code{\link[SDMTools]{optim.thresh}}).}

\item{metric}{character. Metric used to compute the binary map threshold (see
details below.)}

\item{axes.metric}{Metric used to evaluate variable relative importance (see
details below).}

\item{uncertainty}{logical. If true uncertainty mapping and algorithms
correlation matrix are computed.}

\item{tmp}{logical. If true the habitat suitability map of each algorithms is
saved in a temporary file to release memory. But beware: if you close R,
temporary files will be destroyed. To avoid any loss you can save your ensemble SDM
with \code{\link{save.model}}.}

\item{ensemble.metric}{character. Metric used to select SDMs that will be
included in the ensemble SDM (see details below).}

\item{ensemble.thresh}{numeric. Threshold associated with the metric used to
compute the selection.}

\item{weight}{logical. Choose wether or not you want the SDMs to be weighted
using the mean of the selection metrics.}

\item{verbose}{logical. If true allow the function to print text in the
console}

\item{GUI}{logical. Don't take that argument into account (parameter for the
user interface) !}

\item{...}{additionnal parameters for the algorithm modelling function (see
 details below).}
}
\value{
an S4 \linkS4class{Ensemble.SDM} Class object viewable with
 \code{\link{plot.model}} method
}
\description{
This is a function for modelling one specie distribution with several
algorithms and make an ensemble model of theim. It takes in inputs an
occurences data frame made with presence/absence or presence-only records and
a raster objects for data extractions and projections. It returns an S4
\linkS4class{Ensemble.SDM} class object containing the habitat suitability
map, the binary map, and the uncertainty map (based on the between-algorithm
variance of habitat suitability maps) and all evaluation tables coming with
(model evaluation, algorithms evaluation, algorithms correlation matrix and
variable importance).
}
\details{
\describe{ \item{algorithms}{'all' allows you to call directly all
 available algorithms. Currently, available algorithms include Generalized
 linear model (\strong{GLM}), Generalized additive model (\strong{GAM}),
 Multivaraite adaptative regression splines (\strong{MARS}), Generalized
 boosted regressions model (\strong{GBM}), Classification tree analysis
 (\strong{CTA}), Random forest (\strong{RF}), Maximum Entropy
 (\strong{MAXENT}), Artificial Neural Network (\strong{ANN}), and Support
 vector machines (\strong{SVM}). Each algorithm has its own parameters
 settable with the (\strong{...}, see each algorithm section below to set
 their parameters.)} \item{"PA"}{list with two values : \strong{nb} number of
 pseudo-absence selected, and \strong{strat} strategy used for pseudo-absence
 selection: either random selection or disk selection. We set to default
 recommendation from Barbet-Massin et al. (2012) (see references).}
 \item{cv}{\strong{Cross validation} method used to split the occurences
 dataset for evaluation: \strong{holdout} data are partitioned in a training
 set and an evaluating set using a fraction (\emph{cv.param[1]}) and the
 operation can be repeated (\emph{cv.param[2]}), \strong{k-folds} data are
 partitioned in k folds successively being the evaluating set regarding a
 parameter k (\emph{cv.param[1]}) and the operation can be repeated
 (\emph{cv.param[2]}), \strong{LOO} (Leave One Out) each point are
 successively take as evaluation data.} \item{metric}{Choice of the metric
 used to compute the binary map threshold and the confusion matrix (by
 default SES as recommended by Liu et al. (2005),see references below):
 \strong{Kappa} maximizes the Kappa, \strong{CCR} maximizes the proportion of
 correctly predicted observations, \strong{TSS} (True Skill Statistic)
 maximizes the sum of sensitivity and specificity, \strong{SES} using the
 sensitivty-specificity equality, \strong{LW} using the lowest occurence
 prediction probability, \strong{ROC} minimizing the distance between the ROC
 plot (receiving operative curve) and the upper left corner
 (1,1).}\item{axes.metric}{Choice of the metric used to evaluate the variable
 relative importance in percent (variation of the model evaluation without
 this axis): \strong{Pearson} Pearson's correlation coefficient, \strong{AUC}
 area under the receiving operating characteristic (ROC) curve,
 \strong{Kappa}, \strong{sensitivity}, \strong{specificity}, and
 \strong{prop.correct} proportion of correctly predicted occurences.}
 \item{ensemble.metric}{Ensemble metric (metric used to compute the SDMs
 selection): \strong{AUC} area under the receiving operating characteristic
 (ROC) curve, \strong{Kappa}, \strong{sensitivity}, \strong{specificity}, and
 \strong{prop.correct} proportion of correctly predicted occurences.}
 \item{"..."}{See algorithm in detail section} }
}
\section{Generalized linear models (\strong{GLM}) }{
 Uses the glm function from
 the package 'stats', you can set the following parameters (see
 \code{\link[stats]{glm}} for more details): \describe{
 \item{test}{character. Test used to evaluate the model, default 'AIC'.}
 \item{epsilon}{numeric. Epsilon value used to fit the model, default
 10e-08.} \item{maxit}{numeric. Maximum number of iterations allowed to fit
 the SDM, default 500.} }
}

\section{Generalized additive models (\strong{GAM}) }{
 Uses the gam function
 from the package 'mgcv', you can set the following parameters (see
 \code{\link[mgcv]{gam}} for more details): \describe{ \item{test}{character.
 Test used to evaluate the model, default 'AIC'.} \item{epsilon}{numeric.
 Epsilon value used to fit the model, default 10e-08.} \item{maxit}{numeric.
 Maximum number of iterations allowed to fit the SDM, default 500.} }
}

\section{Multivaraite adaptative regression splines (\strong{MARS}) }{
 Uses the
 earth function from the package 'earth', you can set the following
 parameters (see \code{\link[earth]{earth}} for more details): \describe{
 \item{degree}{integer. Number of interactions degrees allowed in the SDM,
 default 2.} }
}

\section{Generalized boosted regressions models (\strong{GBM}) }{
 Uses the gbm
 function from the package 'gbm,' you can set the following parameters (see
 \code{\link[gbm]{gbm}} for more details): \describe{ \item{trees}{integer.
 Number of trees used in the model, default 2500.}
 \item{final.leave}{integer. Minimum of observations allowed in the final
 leaves of trees, default 1.} \item{cv}{integer. Number of cross-validations,
 default 3.} \item{thresh.shrink}{integer. Tree shrinkage coefficient,
 default 1e-03.} }
}

\section{Classification tree analysis (\strong{CTA}) }{
 Uses the rpart function
 from the package 'rpart', you can set the following parameters (see
 \code{\link[rpart]{rpart}} for more details): \describe{
 \item{final.leave}{integer. Minimum of observations allowed in the final
 leaves of trees, default 1.} \item{cv}{integer. Number of cross-validations,
 default 3.} }
}

\section{Random Forest (\strong{RF}) }{
 Uses the randomForest function from the
 package 'randomForest', you can set those parameters (see
 \code{\link[randomForest]{randomForest}} for more details): \describe{
 \item{trees}{integer. Number of trees used in the model, default 2500.}
 \item{final.leave}{integer. Minimum of observations allowed in the final
 leaves of trees, default 1.} }
}

\section{Maximum Entropy (\strong{MAXENT}) }{
 It uses the maxent function from
 the package 'dismo'. Take care to have correctly install the maxent.jar file
 in the folder dismo in your library folder (see \code{\link[dismo]{maxent}}
 for more details).
}

\section{Artificial Neural Network (\strong{ANN}) }{
 Uses the nnet function
 from the package 'nnet', you can set the following parameters (see
 \code{\link[nnet]{nnet}} for more details): \describe{ \item{maxit}{integer.
 Maximum number of iterations, default 500.} }
}

\section{Support vector machines (\strong{SVM}) }{
 Uses the svm function from
 the package 'e1071', you can set the following parameters (see
 \code{\link[e1071]{svm}} for more details): \describe{ \item{epsilon}{float.
 Epsilon parameter in the insensitive loss function, default 1e-08.}
 \item{cv}{integer. Number of cross-validations, default 3.} }
}

\section{Warning }{
 Depending on the raster object resolution the computing can
 be more or less time- and memory-consuming.
}
\examples{
\dontrun{
ensemble.modelling('all', Occurrences, Env)
}
}
\references{
M. Barbet-Massin, F. Jiguet, C. H.  Albert, & W. Thuiller (2012)
 "Selecting pseudo-absences for species distribution models: how, where and
 how many?" \emph{Methods Ecology and Evolution} 3(2):327-338
 \url{http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00172.x/full}

 C. Liu, P. M. Berry, T. P. Dawson,  R. & G. Pearson (2005) "Selecting thresholds
 of occurrence in the prediction of species distributions." \emph{Ecography} 28:85-393
 \url{http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions}
}
\seealso{
\code{\link{modelling}} for SDMs with a single algorithm,
 \code{\link{stack_modelling}} for SSDMs.
}

